{"ast":null,"code":"import { takeLatest, put, call } from \"redux-saga/effects\";\nimport { LoginSuccess, LoginError } from \"../actions\";\nimport * as actions from \"../actionTypes\";\nimport axios from \"axios\"; // import jwt from \"jsonwebtoken\";\n\nexport function* loginSaga(action) {\n  console.log(action, '===========');\n\n  try {\n    let email = action.payload.email; // let name = action.payload.username;\n\n    let password = action.payload.password; // let option = action.payload.option;\n    // yield put(RegistationRequest);\n\n    const response = yield call(axios.post, `127.0.0.1:8000/auth/login/`, {\n      email,\n      password\n    }); // let username = action.payload.email;\n    // let password = action.payload.password;\n    // let response = yield call(\n    //   axios.get,\n    //   `https://secure-refuge-14993.herokuapp.com/login?username=${username}&password=${password}`\n    // );\n\n    let data = response.data;\n\n    if (data.error === 0) {\n      localStorage.setItem(\"token\", data.token);\n      let user = 'test';\n      yield put(LoginSuccess({\n        response: {\n          data: data,\n          role: user\n        }\n      }));\n    } else {\n      yield put(LoginError({\n        error: data\n      }));\n    }\n  } catch (error) {\n    yield put(LoginError({\n      error: error\n    }));\n  }\n}\nexport function* loginRequest() {\n  yield takeLatest(actions.Login_Request, loginSaga);\n}","map":{"version":3,"sources":["/home/etech/clients/pythonreacttest/src/redux/saga/login.js"],"names":["takeLatest","put","call","LoginSuccess","LoginError","actions","axios","loginSaga","action","console","log","email","payload","password","response","post","data","error","localStorage","setItem","token","user","role","loginRequest","Login_Request"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,GAArB,EAA0BC,IAA1B,QAAsC,oBAAtC;AAEA,SAASC,YAAT,EAAuBC,UAAvB,QAAyC,YAAzC;AACA,OAAO,KAAKC,OAAZ,MAAyB,gBAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB,C,CACA;;AAEA,OAAO,UAAUC,SAAV,CAAoBC,MAApB,EAA4B;AAC/BC,EAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ,EAAmB,aAAnB;;AACF,MAAI;AACF,QAAIG,KAAK,GAACH,MAAM,CAACI,OAAP,CAAeD,KAAzB,CADE,CAEF;;AACA,QAAIE,QAAQ,GAAGL,MAAM,CAACI,OAAP,CAAeC,QAA9B,CAHE,CAIF;AAEA;;AACA,UAAMC,QAAQ,GAAG,MAAMZ,IAAI,CACzBI,KAAK,CAACS,IADmB,EAExB,4BAFwB,EAEI;AAC3BJ,MAAAA,KAD2B;AAE3BE,MAAAA;AAF2B,KAFJ,CAA3B,CAPE,CAcF;AACA;AACA;AACA;AACA;AACA;;AACA,QAAIG,IAAI,GAAGF,QAAQ,CAACE,IAApB;;AACA,QAAIA,IAAI,CAACC,KAAL,KAAe,CAAnB,EAAsB;AACpBC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BH,IAAI,CAACI,KAAnC;AACA,UAAIC,IAAI,GAAG,MAAX;AACA,YAAMpB,GAAG,CAACE,YAAY,CAAC;AAAEW,QAAAA,QAAQ,EAAE;AAAEE,UAAAA,IAAI,EAAEA,IAAR;AAAcM,UAAAA,IAAI,EAACD;AAAnB;AAAZ,OAAD,CAAb,CAAT;AACD,KAJD,MAIO;AACL,YAAMpB,GAAG,CAACG,UAAU,CAAC;AAAEa,QAAAA,KAAK,EAAED;AAAT,OAAD,CAAX,CAAT;AACD;AACF,GA5BD,CA4BE,OAAOC,KAAP,EAAc;AACd,UAAMhB,GAAG,CAACG,UAAU,CAAC;AAAEa,MAAAA,KAAK,EAAEA;AAAT,KAAD,CAAX,CAAT;AACD;AACF;AAED,OAAO,UAAUM,YAAV,GAAyB;AAC9B,QAAMvB,UAAU,CAACK,OAAO,CAACmB,aAAT,EAAwBjB,SAAxB,CAAhB;AACD","sourcesContent":["import { takeLatest, put, call } from \"redux-saga/effects\";\n\nimport { LoginSuccess, LoginError } from \"../actions\";\nimport * as actions from \"../actionTypes\";\nimport axios from \"axios\";\n// import jwt from \"jsonwebtoken\";\n\nexport function* loginSaga(action) {\n    console.log(action,'===========')\n  try {\n    let email=action.payload.email\n    // let name = action.payload.username;\n    let password = action.payload.password;\n    // let option = action.payload.option;\n\n    // yield put(RegistationRequest);\n    const response = yield call(\n      axios.post,\n      `127.0.0.1:8000/auth/login/`,{\n        email,\n        password,\n      }\n    );\n    // let username = action.payload.email;\n    // let password = action.payload.password;\n    // let response = yield call(\n    //   axios.get,\n    //   `https://secure-refuge-14993.herokuapp.com/login?username=${username}&password=${password}`\n    // );\n    let data = response.data;\n    if (data.error === 0) {\n      localStorage.setItem(\"token\", data.token);\n      let user = 'test';\n      yield put(LoginSuccess({ response: { data: data, role:user } }));\n    } else {\n      yield put(LoginError({ error: data }));\n    }\n  } catch (error) {\n    yield put(LoginError({ error: error }));\n  }\n}\n\nexport function* loginRequest() {\n  yield takeLatest(actions.Login_Request, loginSaga);\n}\n"]},"metadata":{},"sourceType":"module"}