{"ast":null,"code":"import { takeLatest, put, call } from \"redux-saga/effects\";\nimport { LoginSuccess, LoginError } from \"../actions\";\nimport * as actions from \"../actionTypes\";\nimport axios from \"axios\"; // import jwt from \"jsonwebtoken\";\n\nexport function* loginSaga(action) {\n  try {\n    let username = action.payload.email;\n    let password = action.payload.password;\n    let response = yield call(axios.get, `https://secure-refuge-14993.herokuapp.com/login?username=${username}&password=${password}`);\n    let data = response.data;\n\n    if (data.error === 0) {\n      localStorage.setItem(\"token\", data.token); //   let user = jwt.verify(data.token, \"jwt_tok\");\n\n      yield put(LoginSuccess({\n        response: {\n          data: data,\n          role: user.role\n        }\n      }));\n    } else {\n      yield put(LoginError({\n        error: data\n      }));\n    }\n  } catch (error) {\n    yield put(LoginError({\n      error: error\n    }));\n  }\n}\nexport function* loginRequest() {\n  yield takeLatest(actions.Login_Request, loginSaga);\n}","map":{"version":3,"sources":["/home/etech/clients/pythonreacttest/src/redux/saga/login.js"],"names":["takeLatest","put","call","LoginSuccess","LoginError","actions","axios","loginSaga","action","username","payload","email","password","response","get","data","error","localStorage","setItem","token","role","user","loginRequest","Login_Request"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,GAArB,EAA0BC,IAA1B,QAAsC,oBAAtC;AAEA,SAASC,YAAT,EAAuBC,UAAvB,QAAyC,YAAzC;AACA,OAAO,KAAKC,OAAZ,MAAyB,gBAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB,C,CACA;;AAEA,OAAO,UAAUC,SAAV,CAAoBC,MAApB,EAA4B;AACjC,MAAI;AACF,QAAIC,QAAQ,GAAGD,MAAM,CAACE,OAAP,CAAeC,KAA9B;AACA,QAAIC,QAAQ,GAAGJ,MAAM,CAACE,OAAP,CAAeE,QAA9B;AACA,QAAIC,QAAQ,GAAG,MAAMX,IAAI,CACvBI,KAAK,CAACQ,GADiB,EAEtB,4DAA2DL,QAAS,aAAYG,QAAS,EAFnE,CAAzB;AAIA,QAAIG,IAAI,GAAGF,QAAQ,CAACE,IAApB;;AACA,QAAIA,IAAI,CAACC,KAAL,KAAe,CAAnB,EAAsB;AACpBC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BH,IAAI,CAACI,KAAnC,EADoB,CAEtB;;AACE,YAAMlB,GAAG,CAACE,YAAY,CAAC;AAAEU,QAAAA,QAAQ,EAAE;AAAEE,UAAAA,IAAI,EAAEA,IAAR;AAAcK,UAAAA,IAAI,EAAEC,IAAI,CAACD;AAAzB;AAAZ,OAAD,CAAb,CAAT;AACD,KAJD,MAIO;AACL,YAAMnB,GAAG,CAACG,UAAU,CAAC;AAAEY,QAAAA,KAAK,EAAED;AAAT,OAAD,CAAX,CAAT;AACD;AACF,GAfD,CAeE,OAAOC,KAAP,EAAc;AACd,UAAMf,GAAG,CAACG,UAAU,CAAC;AAAEY,MAAAA,KAAK,EAAEA;AAAT,KAAD,CAAX,CAAT;AACD;AACF;AAED,OAAO,UAAUM,YAAV,GAAyB;AAC9B,QAAMtB,UAAU,CAACK,OAAO,CAACkB,aAAT,EAAwBhB,SAAxB,CAAhB;AACD","sourcesContent":["import { takeLatest, put, call } from \"redux-saga/effects\";\n\nimport { LoginSuccess, LoginError } from \"../actions\";\nimport * as actions from \"../actionTypes\";\nimport axios from \"axios\";\n// import jwt from \"jsonwebtoken\";\n\nexport function* loginSaga(action) {\n  try {\n    let username = action.payload.email;\n    let password = action.payload.password;\n    let response = yield call(\n      axios.get,\n      `https://secure-refuge-14993.herokuapp.com/login?username=${username}&password=${password}`\n    );\n    let data = response.data;\n    if (data.error === 0) {\n      localStorage.setItem(\"token\", data.token);\n    //   let user = jwt.verify(data.token, \"jwt_tok\");\n      yield put(LoginSuccess({ response: { data: data, role: user.role } }));\n    } else {\n      yield put(LoginError({ error: data }));\n    }\n  } catch (error) {\n    yield put(LoginError({ error: error }));\n  }\n}\n\nexport function* loginRequest() {\n  yield takeLatest(actions.Login_Request, loginSaga);\n}\n"]},"metadata":{},"sourceType":"module"}