{"ast":null,"code":"import { takeLatest, put, call } from \"redux-saga/effects\";\nimport { LoginSuccess, LoginError } from \"../actions\";\nimport * as actions from \"../actionTypes\";\nimport axios from \"axios\";\nexport function* loginSaga(action) {\n  try {\n    let email = action.payload.email;\n    let password = action.payload.password;\n    const response = yield call(axios.post, ` http://176.9.137.77:8024/auth/login/`, {\n      email,\n      password\n    });\n    let data = response.data;\n\n    if (data.error === 0) {\n      localStorage.setItem(\"token\", data.token);\n      let user = \"test\";\n      yield put(LoginSuccess({\n        response: {\n          data: data,\n          role: user\n        }\n      }));\n    } else {\n      yield put(LoginError({\n        error: data\n      }));\n    }\n  } catch (error) {\n    yield put(LoginError({\n      error: error\n    }));\n  }\n}\nexport function* loginRequest() {\n  yield takeLatest(actions.Login_Request, loginSaga);\n}","map":{"version":3,"sources":["/home/etech/clients/pythonreacttest/src/redux/saga/login.js"],"names":["takeLatest","put","call","LoginSuccess","LoginError","actions","axios","loginSaga","action","email","payload","password","response","post","data","error","localStorage","setItem","token","user","role","loginRequest","Login_Request"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,GAArB,EAA0BC,IAA1B,QAAsC,oBAAtC;AAEA,SAASC,YAAT,EAAuBC,UAAvB,QAAyC,YAAzC;AACA,OAAO,KAAKC,OAAZ,MAAyB,gBAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAO,UAAUC,SAAV,CAAoBC,MAApB,EAA4B;AACjC,MAAI;AACF,QAAIC,KAAK,GAAGD,MAAM,CAACE,OAAP,CAAeD,KAA3B;AACA,QAAIE,QAAQ,GAAGH,MAAM,CAACE,OAAP,CAAeC,QAA9B;AACA,UAAMC,QAAQ,GAAG,MAAMV,IAAI,CACzBI,KAAK,CAACO,IADmB,EAExB,uCAFwB,EAGzB;AACEJ,MAAAA,KADF;AAEEE,MAAAA;AAFF,KAHyB,CAA3B;AAQA,QAAIG,IAAI,GAAGF,QAAQ,CAACE,IAApB;;AACA,QAAIA,IAAI,CAACC,KAAL,KAAe,CAAnB,EAAsB;AACpBC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BH,IAAI,CAACI,KAAnC;AACA,UAAIC,IAAI,GAAG,MAAX;AACA,YAAMlB,GAAG,CAACE,YAAY,CAAC;AAAES,QAAAA,QAAQ,EAAE;AAAEE,UAAAA,IAAI,EAAEA,IAAR;AAAcM,UAAAA,IAAI,EAAED;AAApB;AAAZ,OAAD,CAAb,CAAT;AACD,KAJD,MAIO;AACL,YAAMlB,GAAG,CAACG,UAAU,CAAC;AAAEW,QAAAA,KAAK,EAAED;AAAT,OAAD,CAAX,CAAT;AACD;AACF,GAnBD,CAmBE,OAAOC,KAAP,EAAc;AACd,UAAMd,GAAG,CAACG,UAAU,CAAC;AAAEW,MAAAA,KAAK,EAAEA;AAAT,KAAD,CAAX,CAAT;AACD;AACF;AAED,OAAO,UAAUM,YAAV,GAAyB;AAC9B,QAAMrB,UAAU,CAACK,OAAO,CAACiB,aAAT,EAAwBf,SAAxB,CAAhB;AACD","sourcesContent":["import { takeLatest, put, call } from \"redux-saga/effects\";\n\nimport { LoginSuccess, LoginError } from \"../actions\";\nimport * as actions from \"../actionTypes\";\nimport axios from \"axios\";\n\nexport function* loginSaga(action) {\n  try {\n    let email = action.payload.email;\n    let password = action.payload.password;\n    const response = yield call(\n      axios.post,\n      ` http://176.9.137.77:8024/auth/login/`,\n      {\n        email,\n        password,\n      }\n    );\n    let data = response.data;\n    if (data.error === 0) {\n      localStorage.setItem(\"token\", data.token);\n      let user = \"test\";\n      yield put(LoginSuccess({ response: { data: data, role: user } }));\n    } else {\n      yield put(LoginError({ error: data }));\n    }\n  } catch (error) {\n    yield put(LoginError({ error: error }));\n  }\n}\n\nexport function* loginRequest() {\n  yield takeLatest(actions.Login_Request, loginSaga);\n}\n"]},"metadata":{},"sourceType":"module"}