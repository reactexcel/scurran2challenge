{"ast":null,"code":"import { takeLatest, put, call } from \"redux-saga/effects\";\nimport { LoginSuccess, LoginError } from \"../actions\";\nimport * as actions from \"../actionTypes\";\nimport axios from \"axios\"; // import jwt from \"jsonwebtoken\";\n\nexport function* loginSaga(action) {\n  console.log(action, '===========');\n\n  try {\n    let email = action.payload.email;\n    let name = action.payload.username;\n    let password = action.payload.password; // let option = action.payload.option;\n    // yield put(RegistationRequest);\n\n    const response = yield call(axios.post, `http://127.0.0.1:8000/auth/register/`, {\n      email,\n      name,\n      password,\n      password2: password\n    }); // let username = action.payload.email;\n    // let password = action.payload.password;\n    // let response = yield call(\n    //   axios.get,\n    //   `https://secure-refuge-14993.herokuapp.com/login?username=${username}&password=${password}`\n    // );\n\n    let data = response.data;\n\n    if (data.error === 0) {\n      localStorage.setItem(\"token\", data.token);\n      let user = 'test';\n      yield put(LoginSuccess({\n        response: {\n          data: data,\n          role: user\n        }\n      }));\n    } else {\n      yield put(LoginError({\n        error: data\n      }));\n    }\n  } catch (error) {\n    yield put(LoginError({\n      error: error\n    }));\n  }\n}\nexport function* loginRequest() {\n  yield takeLatest(actions.Login_Request, loginSaga);\n}","map":{"version":3,"sources":["/home/etech/clients/pythonreacttest/src/redux/saga/login.js"],"names":["takeLatest","put","call","LoginSuccess","LoginError","actions","axios","loginSaga","action","console","log","email","payload","name","username","password","response","post","password2","data","error","localStorage","setItem","token","user","role","loginRequest","Login_Request"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,GAArB,EAA0BC,IAA1B,QAAsC,oBAAtC;AAEA,SAASC,YAAT,EAAuBC,UAAvB,QAAyC,YAAzC;AACA,OAAO,KAAKC,OAAZ,MAAyB,gBAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB,C,CACA;;AAEA,OAAO,UAAUC,SAAV,CAAoBC,MAApB,EAA4B;AAC/BC,EAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ,EAAmB,aAAnB;;AACF,MAAI;AACF,QAAIG,KAAK,GAACH,MAAM,CAACI,OAAP,CAAeD,KAAzB;AACA,QAAIE,IAAI,GAAGL,MAAM,CAACI,OAAP,CAAeE,QAA1B;AACA,QAAIC,QAAQ,GAAGP,MAAM,CAACI,OAAP,CAAeG,QAA9B,CAHE,CAIF;AAEA;;AACA,UAAMC,QAAQ,GAAG,MAAMd,IAAI,CACzBI,KAAK,CAACW,IADmB,EAExB,sCAFwB,EAEc;AACrCN,MAAAA,KADqC;AAErCE,MAAAA,IAFqC;AAGrCE,MAAAA,QAHqC;AAIrCG,MAAAA,SAAS,EAACH;AAJ2B,KAFd,CAA3B,CAPE,CAgBF;AACA;AACA;AACA;AACA;AACA;;AACA,QAAII,IAAI,GAAGH,QAAQ,CAACG,IAApB;;AACA,QAAIA,IAAI,CAACC,KAAL,KAAe,CAAnB,EAAsB;AACpBC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BH,IAAI,CAACI,KAAnC;AACA,UAAIC,IAAI,GAAG,MAAX;AACA,YAAMvB,GAAG,CAACE,YAAY,CAAC;AAAEa,QAAAA,QAAQ,EAAE;AAAEG,UAAAA,IAAI,EAAEA,IAAR;AAAcM,UAAAA,IAAI,EAACD;AAAnB;AAAZ,OAAD,CAAb,CAAT;AACD,KAJD,MAIO;AACL,YAAMvB,GAAG,CAACG,UAAU,CAAC;AAAEgB,QAAAA,KAAK,EAAED;AAAT,OAAD,CAAX,CAAT;AACD;AACF,GA9BD,CA8BE,OAAOC,KAAP,EAAc;AACd,UAAMnB,GAAG,CAACG,UAAU,CAAC;AAAEgB,MAAAA,KAAK,EAAEA;AAAT,KAAD,CAAX,CAAT;AACD;AACF;AAED,OAAO,UAAUM,YAAV,GAAyB;AAC9B,QAAM1B,UAAU,CAACK,OAAO,CAACsB,aAAT,EAAwBpB,SAAxB,CAAhB;AACD","sourcesContent":["import { takeLatest, put, call } from \"redux-saga/effects\";\n\nimport { LoginSuccess, LoginError } from \"../actions\";\nimport * as actions from \"../actionTypes\";\nimport axios from \"axios\";\n// import jwt from \"jsonwebtoken\";\n\nexport function* loginSaga(action) {\n    console.log(action,'===========')\n  try {\n    let email=action.payload.email\n    let name = action.payload.username;\n    let password = action.payload.password;\n    // let option = action.payload.option;\n\n    // yield put(RegistationRequest);\n    const response = yield call(\n      axios.post,\n      `http://127.0.0.1:8000/auth/register/`,{\n        email,\n        name,\n        password,\n        password2:password\n      }\n    );\n    // let username = action.payload.email;\n    // let password = action.payload.password;\n    // let response = yield call(\n    //   axios.get,\n    //   `https://secure-refuge-14993.herokuapp.com/login?username=${username}&password=${password}`\n    // );\n    let data = response.data;\n    if (data.error === 0) {\n      localStorage.setItem(\"token\", data.token);\n      let user = 'test';\n      yield put(LoginSuccess({ response: { data: data, role:user } }));\n    } else {\n      yield put(LoginError({ error: data }));\n    }\n  } catch (error) {\n    yield put(LoginError({ error: error }));\n  }\n}\n\nexport function* loginRequest() {\n  yield takeLatest(actions.Login_Request, loginSaga);\n}\n"]},"metadata":{},"sourceType":"module"}